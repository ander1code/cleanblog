{% extends 'index.html' %}

{% block contents %}

{% load static %}

<div class="container cont-frm" id="divEdit">
    <div class="row">
        <div class='offset-md-1 col-md-10 offset-md-1'>
            <div class="form-group">
                <h1>{% if request.session.edition %} Edit {% else %} Create {% endif %}</h1>
            </div>
            <div class="form-group">
                {% if request.session.edition %}
                    <label for="">Author</label>
                    <input type="text" class='form-control'readonly="true" name="author_name" id="author_name" value="{{author_name}}">
                {% endif %}
            </div>
            <hr>    
            <form enctype="multipart/form-data" method="POST">
                <fieldset>
                    <div class="form-group">
                        {% include "_partials/_errors.html" %}
                    </div>
                    <div class="form-group">
                        {% csrf_token %}
                    </div>
                    <div class="form-group">
                        <label for="title">Title</label>
                        {{form.title}}
                    </div>
                    <div class="form-group">
                        <label for="category">Category</label>
                        {{form.category}}
                    </div>
                    <div class="form-group">
                        <label for="briefing">Briefing</label>
                        {{form.briefing}}
                    </div>
                    <div class="form-group">
                        <label for="text">Text</label>
                        {{form.text}}
                    </div>

                    {% if not request.session.edition %}
                        <div class="form-group">
                            <label for="picture">Picture</label>
                            {{form.picture}}
                        </div>
                        <div class="form-group">
                            <button type="submit" class='btn btn-success col-md-2 pull-right' name="create" id="create">Create</button>   
                            <button type="reset" class='btn btn-secondary col-md-2 pull-right' name="clean" id="clean">Clean</button>   
                        </div>
                    {% else %}
                        <div class="form-group">
                            <label for="picture">Picture</label>
                            <a href="{{picture_url}}" target="_blank"><img src="{{picture_url}}" alt="{{post.title}}" class="pull-right img-edit" ></a>
                            {{form.picture}}
                        </div>
                        <div class="form-group">
                            <a href="{% if post.id %}{% url 'post-detail' post.id %}{% else %}{% url 'post-list' %}{% endif %}"  class="btn btn-secondary col-md-2 pull-right">Cancel</a>
                            <button type="button" class="btn btn-warning col-md-2 pull-right" data-toggle="modal" data-target="#modalEdit">Edit</button>
                            <button type="button" class="btn btn-danger col-md-2 pull-right" data-toggle="modal" data-target="#modalDelete">Delete</button>
                        </div>
                    {% endif %}
                </fieldset>    
                
                {% if request.session.edition %}
                <div id="modalEdit" class="modal fade" role="dialog" style="color:black;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Question</h3>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <p>Do you want edit this post?</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                <button type="submit" class="btn btn-warning" name="edit" id="edit">Yes</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="modalDelete" class="modal fade" role="dialog" style="color:black;">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Question</h3>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <p>Do you want delete this post?</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                <button type="submit" class="btn btn-danger" name="delete" id="delete">Ok</button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}

            </form>
        </div>
    </div>
</div>
<link href="{% static 'css/styles/form.css' %}" rel="stylesheet" type="text/css"/>          
    
{% endblock contents %}
    

          
